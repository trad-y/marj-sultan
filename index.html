<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø±Ø¬ Ø§Ù„Ø³Ù„Ø·Ø§Ù† | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ù…Ø·ÙˆØ±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #d4af37;
            --gold-bright: #f1c40f;
            --bg: #050505;
            --card-bg: #111111;
            --glass: rgba(255, 255, 255, 0.03);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { background-color: var(--bg); color: #fff; overflow-x: hidden; line-height: 1.6; }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø°ÙƒÙŠ --- */
        #status-wrapper {
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%);
            z-index: 10000; width: 90%; max-width: 400px; display: none;
        }
        .status-capsule {
            background: rgba(0,0,0,0.9); border: 1px solid var(--gold);
            padding: 12px 20px; border-radius: 50px; display: flex;
            align-items: center; justify-content: space-between;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); backdrop-filter: blur(10px);
        }
        .pulse-gold { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); } 100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); } }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø¨Ø­Ø« --- */
        .hero-section { padding: 40px 20px 20px; text-align: center; background: linear-gradient(to bottom, #111, var(--bg)); }
        .hero-section h1 { font-size: 2.8rem; font-weight: 900; color: var(--gold); letter-spacing: -1px; margin-bottom: 5px; }
        .search-box { position: relative; max-width: 500px; margin: 20px auto; padding: 0 15px; }
        .search-box input {
            width: 100%; padding: 15px 25px; border-radius: 15px; border: 1px solid var(--glass);
            background: var(--card-bg); color: #fff; font-size: 1rem; text-align: center;
            transition: var(--transition); box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .search-box input:focus { border-color: var(--gold); background: #181818; }

        /* --- Ø¹Ø±Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù (3 Ø£Ø¹Ù…Ø¯Ø©) --- */
        .container { padding: 0 15px 120px; max-width: 1200px; margin: 0 auto; }
        .category-block { margin-bottom: 40px; }
        .category-title {
            color: var(--gold); font-size: 1.4rem; font-weight: 800; margin-bottom: 20px;
            display: flex; align-items: center; gap: 15px;
        }
        .category-title::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to left, var(--gold), transparent); opacity: 0.2; }
        
        .menu-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        
        .item-card {
            background: var(--card-bg); border-radius: 18px; overflow: hidden;
            position: relative; aspect-ratio: 1 / 1.2; border: 1px solid var(--glass);
            cursor: pointer; transition: var(--transition);
        }
        .item-card:active { transform: scale(0.95); }
        .img-container { width: 100%; height: 65%; overflow: hidden; position: relative; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: var(--transition); }
        .item-info { padding: 10px; text-align: right; }
        .item-name { font-size: 0.85rem; font-weight: 700; display: block; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-price { color: var(--gold); font-weight: 900; font-size: 0.9rem; }
        .prep-time-tag { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); padding: 4px 8px; border-radius: 8px; font-size: 0.6rem; color: var(--gold); }

        /* --- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ (Modal) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 20000; display: none;
            align-items: center; justify-content: center; backdrop-filter: blur(10px);
        }
        .modal-content {
            background: #0d0d0d; width: 92%; max-width: 450px; border-radius: 30px;
            overflow: hidden; border: 1px solid var(--glass); position: relative;
            max-height: 85vh; overflow-y: auto;
        }
        .modal-btn-close { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.5); border: none; color: #fff; width: 35px; height: 35px; border-radius: 50%; z-index: 2; }

        /* --- Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ø·Ù„Ø¨ --- */
        .cart-capsule {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: var(--gold); color: #000; padding: 18px 40px; border-radius: 50px;
            font-weight: 900; font-size: 1.1rem; display: none; z-index: 9000;
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.3); cursor: pointer;
        }

        /* --- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… TRAD Ø§Ù„Ø®Ø§Ø±Ù‚Ø© --- */
        #admin-panel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 30000; display: none; padding: 20px;
            overflow-y: auto;
        }
        .admin-card { background: #111; border: 1px solid #222; padding: 20px; border-radius: 20px; margin-bottom: 20px; }
        .admin-input { width: 100%; padding: 12px; margin: 8px 0; background: #050505; border: 1px solid #333; color: #fff; border-radius: 10px; }
        .btn-action { padding: 10px 20px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
        .btn-save { background: var(--success, #27ae60); color: #fff; }
        .btn-delete { background: #c0392b; color: #fff; }
        .btn-add { background: var(--gold); color: #000; margin: 10px 0; }

        /* --- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ --- */
        .delivery-section { display: none; margin-top: 15px; border-top: 1px solid #222; padding-top: 15px; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="status-wrapper">
        <div class="status-capsule pulse-gold">
            <span id="status-icon"><i class="fas fa-utensils"></i></span>
            <span id="status-text">Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ...</span>
            <span id="status-timer" style="font-weight: 900;">13:00</span>
        </div>
    </div>

    <section class="hero-section">
        <h1>Ù…Ø±Ø¬ Ø§Ù„Ø³Ù„Ø·Ø§Ù†</h1>
        <p style="color: var(--gold); letter-spacing: 4px; font-size: 0.7rem; opacity: 0.8;">PREMIUM RESTAURANT SYSTEM</p>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¬Ø¨Ø© Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²..." onkeyup="handleSearch(this.value)">
        </div>
    </section>

    <div class="container" id="mainMenu">
        </div>

    <div id="itemModal" class="modal-overlay" onclick="if(event.target==this) closeModal()">
        <div class="modal-content">
            <button class="modal-btn-close" onclick="closeModal()">âœ•</button>
            <div id="modalData"></div>
        </div>
    </div>

    <div id="cartModal" class="modal-overlay">
        <div class="modal-content" style="padding: 25px;">
            <h2 style="color:var(--gold); margin-bottom:20px;">ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ</h2>
            <div id="cartItemsList"></div>
            
            <div style="margin: 20px 0;">
                <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                    <input type="checkbox" id="deliveryToggle" onchange="toggleDeliveryFields()" style="width:20px; height:20px;">
                    <span>Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ (Delivery)</span>
                </label>
            </div>

            <div id="deliveryFields" class="delivery-section">
                <input type="text" id="area" class="admin-input" placeholder="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© / Ø§Ù„Ø­ÙŠ">
                <input type="text" id="street" class="admin-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹">
                <input type="text" id="house" class="admin-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ù†Ø§ÙŠØ© ÙˆØ§Ù„Ø´Ù‚Ø©">
            </div>

            <textarea id="orderNote" class="admin-input" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
            <input type="text" id="custName" class="admin-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…">
            <input type="text" id="custPhone" class="admin-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„ØªÙˆØ§ØµÙ„">
            
            <button class="btn-action btn-add" style="width:100%; padding:18px; font-size:1.1rem;" onclick="submitOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
            <button class="btn-action" style="width:100%; background:none; color:#555;" onclick="closeCart()">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <div id="admin-panel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <h1 style="color:var(--gold)">Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ</h1>
            <button class="btn-action btn-delete" onclick="closeAdmin()">Ø¥ØºÙ„Ø§Ù‚ ÙˆØ­ÙØ¸</button>
        </div>
        
        <button class="btn-action btn-add" onclick="addCategory()">+ Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø«Ù„: Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ)</button>
        
        <div id="adminCategories"></div>
    </div>

    <div id="cartCapsule" class="cart-capsule pulse-gold" onclick="openCart()">
        Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© (<span id="cartCount">0</span>)
    </div>

    <script>
        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Storage Engine) ---
        let db = JSON.parse(localStorage.getItem('sultan_db')) || [
            {
                id: Date.now(),
                category: "Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹",
                items: [
                    { id: 101, name: "Ø´Ø§ÙˆØ±Ù…Ø§ Ø³ÙˆØ¨Ø± Ø¯Ø¨Ù„", price: "4.50", desc: "Ø®Ø¨Ø² ØµØ§Ø¬ØŒ Ø«ÙˆÙ…ÙŠØ©ØŒ Ù…Ø®Ù„Ù„ØŒ Ø¨Ø·Ø§Ø·Ø³", time: "12 Ø¯", img: "https://images.unsplash.com/photo-1529006557810-274b9b2fc783?w=500" },
                    { id: 102, name: "Ù†ØµÙ Ø¯Ø¬Ø§Ø¬Ø© Ø¹ Ø§Ù„ÙØ­Ù…", price: "3.50", desc: "ØªÙ‚Ø¯Ù… Ù…Ø¹ Ø§Ù„Ø£Ø±Ø² ÙˆØ§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª", time: "20 Ø¯", img: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=500" }
                ]
            }
        ];

        let cart = [];
        let socket;
        let orderID = "MS-" + Math.floor(1000 + Math.random() * 9000);

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ØªØµØ§Ù„ (Socket Logic) ---
        function initSocket() {
            socket = new WebSocket("ws://192.168.1.101:8080");
            socket.onmessage = (e) => {
                const msg = e.data;
                const statusWrap = document.getElementById('status-wrapper');
                const statusText = document.getElementById('status-text');
                
                statusWrap.style.display = 'block';
                if(msg.includes("Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±")) {
                    statusText.innerText = "ğŸ‘¨â€ğŸ³ Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¢Ù†";
                    statusWrap.querySelector('.status-capsule').style.borderColor = "#e67e22";
                } else if(msg.includes("Ø¬Ø§Ù‡Ø²")) {
                    statusText.innerText = "âœ… Ø·Ù„Ø¨Ùƒ Ø¬Ø§Ù‡Ø²! ØµØ­Ø© ÙˆØ¹Ø§ÙÙŠØ©";
                    statusWrap.querySelector('.status-capsule').style.borderColor = "#27ae60";
                    alert("ÙˆØ¬Ø¨ØªÙƒ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…!");
                } else if(msg.includes("Ù…Ø±ÙÙˆØ¶")) {
                    statusText.innerText = "âŒ Ù†Ø¹ØªØ°Ø±ØŒ ØªØ¹Ø°Ø± Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨";
                    statusWrap.querySelector('.status-capsule').style.borderColor = "#c0392b";
                }
            };
        }

        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¹Ø±Ø¶ (Rendering Engine) ---
        function renderMenu(filter = "") {
            const container = document.getElementById('mainMenu');
            container.innerHTML = "";
            
            db.forEach(cat => {
                const filteredItems = cat.items.filter(i => i.name.includes(filter));
                if (filteredItems.length === 0) return;

                let html = `
                    <div class="category-block">
                        <h2 class="category-title">${cat.category}</h2>
                        <div class="menu-grid">
                `;

                filteredItems.forEach(item => {
                    html += `
                        <div class="item-card" onclick="openItem(${item.id})">
                            <div class="prep-time-tag"><i class="far fa-clock"></i> ${item.time}</div>
                            <div class="img-container">
                                <img src="${item.img || 'https://via.placeholder.com/150'}" alt="${item.name}">
                            </div>
                            <div class="item-info">
                                <span class="item-name">${item.name}</span>
                                <span class="item-price">${item.price} Ø¯.Ø£</span>
                            </div>
                        </div>
                    `;
                });

                html += `</div></div>`;
                container.innerHTML += html;
            });
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£ØµÙ†Ø§Ù ---
        function openItem(id) {
            let item;
            db.forEach(c => c.items.forEach(i => { if(i.id === id) item = i; }));
            
            document.getElementById('modalData').innerHTML = `
                <img src="${item.img}" style="width:100%; height:250px; object-fit:cover;">
                <div style="padding:25px;">
                    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                        <h2 style="font-size:1.5rem; color:var(--gold);">${item.name}</h2>
                        <span style="font-weight:900; font-size:1.2rem;">${item.price} Ø¯.Ø£</span>
                    </div>
                    <p style="color:#888; margin:15px 0; font-size:0.9rem;">${item.desc}</p>
                    <div style="background:#1a1a1a; padding:15px; border-radius:15px; margin-bottom:20px;">
                        <small style="color:var(--gold); display:block; margin-bottom:5px;">ÙˆÙ‚Øª Ø§Ù„ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</small>
                        <i class="far fa-clock"></i> ${item.time}
                    </div>
                    <button class="btn-action btn-add" style="width:100%; padding:15px;" onclick="addToCart(${item.id})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            `;
            document.getElementById('itemModal').style.display = 'flex';
        }

        function addToCart(id) {
            let item;
            db.forEach(c => c.items.forEach(i => { if(i.id === id) item = i; }));
            cart.push(item);
            updateCartUI();
            closeModal();
        }

        function updateCartUI() {
            document.getElementById('cartCount').innerText = cart.length;
            document.getElementById('cartCapsule').style.display = cart.length > 0 ? 'block' : 'none';
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ø·Ù„Ø¨ ---
        function toggleDeliveryFields() {
            const isDelivery = document.getElementById('deliveryToggle').checked;
            document.getElementById('deliveryFields').style.display = isDelivery ? 'block' : 'none';
        }

        function submitOrder() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            if(!name || !phone) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");

            const isDel = document.getElementById('deliveryToggle').checked;
            const orderData = {
                orderID,
                customer: name,
                phone: phone,
                items: cart,
                isDelivery: isDel,
                address: isDel ? `${document.getElementById('area').value}, ${document.getElementById('street').value}` : "Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„ÙØ±Ø¹",
                note: document.getElementById('orderNote').value
            };

            if(socket.readyState === WebSocket.OPEN) {
                socket.send(JSON.stringify(orderData));
                document.getElementById('status-wrapper').style.display = 'block';
                document.getElementById('status-timer').innerText = orderID;
                closeCart();
                cart = [];
                updateCartUI();
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰.");
            } else {
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.");
            }
        }

        // --- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø®Ø§Ø±Ù‚Ø© (TRAD) ---
        function handleSearch(val) {
            if(val.toLowerCase() === 'trad') openAdmin();
            else renderMenu(val);
        }

        function openAdmin() {
            document.getElementById('admin-panel').style.display = 'block';
            renderAdminContent();
        }

        function renderAdminContent() {
            const container = document.getElementById('adminCategories');
            container.innerHTML = "";
            db.forEach((cat, cIdx) => {
                let html = `
                    <div class="admin-card">
                        <input type="text" class="admin-input" value="${cat.category}" onchange="updateCatName(${cIdx}, this.value)" style="font-weight:bold; color:var(--gold);">
                        <button class="btn-action btn-delete" onclick="removeCategory(${cIdx})">Ø­Ø°Ù Ø§Ù„ÙØ¦Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</button>
                        <hr style="margin:15px 0; opacity:0.1;">
                `;

                cat.items.forEach((item, iIdx) => {
                    html += `
                        <div style="background:#050505; padding:15px; border-radius:10px; margin-bottom:10px; border:1px solid #222;">
                            <input type="text" class="admin-input" value="${item.name}" onchange="updateItem(${cIdx}, ${iIdx}, 'name', this.value)" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
                            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                                <input type="text" class="admin-input" value="${item.price}" onchange="updateItem(${cIdx}, ${iIdx}, 'price', this.value)" placeholder="Ø§Ù„Ø³Ø¹Ø±">
                                <input type="text" class="admin-input" value="${item.time}" onchange="updateItem(${cIdx}, ${iIdx}, 'time', this.value)" placeholder="ÙˆÙ‚Øª Ø§Ù„ØªØ¬Ù‡ÙŠØ²">
                            </div>
                            <input type="text" class="admin-input" value="${item.img}" onchange="updateItem(${cIdx}, ${iIdx}, 'img', this.value)" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
                            <textarea class="admin-input" onchange="updateItem(${cIdx}, ${iIdx}, 'desc', this.value)" placeholder="ÙˆØµÙ Ø§Ù„ØµÙ†Ù">${item.desc}</textarea>
                            <button class="btn-action btn-delete" style="font-size:0.7rem;" onclick="removeItem(${cIdx}, ${iIdx})">Ø­Ø°Ù Ø§Ù„ØµÙ†Ù</button>
                        </div>
                    `;
                });

                html += `
                    <button class="btn-action btn-add" onclick="addItemToCat(${cIdx})">+ Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©</button>
                </div>`;
                container.innerHTML += html;
            });
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… (CRUD)
        function updateCatName(cIdx, val) { db[cIdx].category = val; saveDB(); }
        function removeCategory(cIdx) { if(confirm("Ø­Ø°Ù Ø§Ù„ÙØ¦Ø©ØŸ")) { db.splice(cIdx, 1); saveDB(); renderAdminContent(); } }
        function addItemToCat(cIdx) { db[cIdx].items.push({ id: Date.now(), name: "ØµÙ†Ù Ø¬Ø¯ÙŠØ¯", price: "0.00", desc: "ÙˆØµÙ Ø§Ù„ØµÙ†Ù", time: "10 Ø¯", img: "" }); saveDB(); renderAdminContent(); }
        function updateItem(cIdx, iIdx, field, val) { db[cIdx].items[iIdx][field] = val; saveDB(); }
        function removeItem(cIdx, iIdx) { db[cIdx].items.splice(iIdx, 1); saveDB(); renderAdminContent(); }
        function addCategory() { db.push({ id: Date.now(), category: "ÙØ¦Ø© Ø¬Ø¯ÙŠØ¯Ø©", items: [] }); saveDB(); renderAdminContent(); }
        
        function saveDB(
